# 戴森球计划种子搜索&查看器

## 搜索器特点

- 搜索条件更加精细：本搜索器的条件分为星系、恒星、星球三级，支持随意组合，定制化筛选星球级别矿簇数、词条等内容
- 模拟精度高：据我所知，本项目是目前唯一一个实现星球矿脉生成的工具，近乎100%还原了游戏中的矿脉数量，而非传统的矿簇数量
- 搜索效率更高：种子搜索部分使用运行效率更高的c++编写，单线程速度是[DspFindSeed](https://github.com/Xinyuell/DspFindSeed)的20多倍（使用寻找3个蓝巨星的种子进行测试）
- 应用内置多进程，无需多开；支持导入种子列表进行二次搜索

![image](/assets/show_search.png)

## 查看器特点

- 内置UI显示种子信息：允许手动或批量导入种子，点击即可切换，导入格式与[DspFindSeed](https://github.com/Xinyuell/DspFindSeed)的搜种结果兼容
- 支持种子排序：允许根据恒星类型、星球类型、矿簇/矿脉数量等对种子进行排序，并展示相应的排序值
- 允许自定义排序值：[自定义排序](/GUI/seed_viewer/sort_seed/custom_sort.py)中提供了现成的接口，可以方便的编写python代码判定种子的价值，用于排序

![image](/assets/show_check.png)

## 使用说明&注意事项

### 通用
- 进程安全：建议停止搜索/排序后再退出应用，视批大小有一定的时间延迟，若遇到孤儿进程请使用任务管理器手动结束
- 矿簇/矿脉：矿簇对应游戏中集中的一片矿脉
- 特殊条件：在种子搜索和查看器排序时，高产气巨可被视为气态巨星，但气态巨星不会被视为高产气巨
- 快速模式：完整生成矿脉的性能开销极大，因此引入快速模式。在该模式中，使用的矿簇和矿脉为理论生成的最大值，实际生成数量大约为该值的`0.8倍`。快速模式对每个种子的性能开销基本一致

### 搜索器
- 批大小：建议控制每秒完成的batch数量在进程数的`0.5~5`倍之间。过大的批大小会显著增加停止搜索的响应延迟，过小的批大小会带来额外的性能损耗
- 进程数：最高可设置为128进程，但实际的进程数量不会超过cpu核心数
- 条件关系：星球条件可被设定为星系或恒星条件的子条件，恒星条件为星系条件的子条件。恒星条件需满足自身及其所有子条件才被判断为满足，星系条件同理。满足星系条件的种子将判定为合格并被记录
- 启用停用条件：条件的勾选仅控制自身是否生效，不连锁至其子条件
- 条件优化：对于未设置的条件，搜索时会自动跳过以提高性能，建议不要设置任何多余条件
- 快速模式性能：受搜索条件影响，标准模式比快速模式慢约`1~20000倍`。建议不要在标准模式设置除单极磁石外的星系级别矿簇/矿脉条件以提高性能，这种情况下，标准模式比快速模式慢约`1~10倍`
- 存储格式：为`.csv`文件，每行为一个种子，`种子id, 恒星数量`，与[DspFindSeed](https://github.com/Xinyuell/DspFindSeed)兼容
- 二次搜索：导入一个或多个上述格式的文件以限定搜索范围

### 查看器
- 种子列表：导入种子上限为`10万`个，有去重功能
- 刷新延时：完整获取一个种子信息大约需要`2~5s`，因此在点击种子列表后会延时一段时间才能显示相关信息；程序会缓存最近100个点击的种子信息，因此重复浏览一个种子时的刷新延时会显著降低
- 快速模式性能：标准模式比快速模式慢约`20000倍`

## 支持的搜索条件
- 星系级：
  - 14种矿簇最低数量：一个种子最高26簇单极磁石
  - 14种矿脉最低数量
- 恒星级：
  - 恒星类型
  - 最低光照
  - 最远距离：输入0表示初始恒星系
  - 符合数量：需要满足该条件的恒星/恒星系数量
  - 14种矿簇最低数量：单极磁石仅在中子星和黑洞出现
  - 14种矿脉最低数量
- 星球级：
  - 星球类型：有且仅有初始星球为地中海类型
  - 星球特点：即星球词条，其中多卫星词条只出现在气态行星（气态巨星、冰巨星、高产气巨），卫星词条不会出现在气态行星
  - 液体
  - 全包：不使用透镜时全球可接收，一个星系最多只有一个全包星
  - 全接收：使用透镜时全球可接收，一个星系最多只有两个全接收星
  - 符合数量：需要满足该条件的行星数量
  - 14种矿簇最低数量
  - 14种矿脉最低数量

## 已知Bug
- 由于初始星球矿脉生成算法较为特殊，目前标准模式结果不可信

## 特别感谢

以下仓库在本项目开发过程中提供了或多或少的帮助, 特此感谢!

- [dspseedsearch](https://github.com/crazyyao0/dspseedsearch)
- [DspFindSeed](https://github.com/Xinyuell/DspFindSeed)
- [PyQt-Fluent-Widgets](https://github.com/zhiyiYo/PyQt-Fluent-Widgets)
- [AhabAssistantLimbusCompany](https://github.com/KIYI671/AhabAssistantLimbusCompany)
